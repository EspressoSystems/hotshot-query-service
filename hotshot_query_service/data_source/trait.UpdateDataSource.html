<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An extension trait for types which implement the update trait for each API module."><title>UpdateDataSource in hotshot_query_service::data_source - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="hotshot_query_service" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.2 (25ef9e3d8 2024-04-09)" data-channel="1.77.2" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../hotshot_query_service/index.html">hotshot_query_service</a><span class="version">0.1.4</span></h2></div><h2 class="location"><a href="#">UpdateDataSource</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.update">update</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In hotshot_query_service::data_source</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../hotshot_query_service/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">hotshot_query_service</a>::<wbr><a href="index.html">data_source</a>::<wbr><a class="trait" href="#">UpdateDataSource</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/hotshot_query_service/data_source/update.rs.html#43-61">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait UpdateDataSource&lt;Types: NodeType&gt;: <a class="trait" href="../availability/trait.UpdateAvailabilityData.html" title="trait hotshot_query_service::availability::UpdateAvailabilityData">UpdateAvailabilityData</a>&lt;Types&gt; + <a class="trait" href="../status/trait.UpdateStatusData.html" title="trait hotshot_query_service::status::UpdateStatusData">UpdateStatusData</a> {
    // Required method
    fn <a href="#tymethod.update" class="fn">update</a>&lt;'life0, 'life1, 'async_trait&gt;(
        &amp;'life0 mut self,
        event: &amp;'life1 Event&lt;Types&gt;
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.77.2/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.77.2/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.77.2/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.77.2/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.77.2/std/primitive.unit.html">()</a>, &lt;Self as <a class="trait" href="../availability/trait.UpdateAvailabilityData.html" title="trait hotshot_query_service::availability::UpdateAvailabilityData">UpdateAvailabilityData</a>&lt;Types&gt;&gt;::<a class="associatedtype" href="../availability/trait.UpdateAvailabilityData.html#associatedtype.Error" title="type hotshot_query_service::availability::UpdateAvailabilityData::Error">Error</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.77.2/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait,
             'life1: 'async_trait</span>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An extension trait for types which implement the update trait for each API module.</p>
<p>If a type implements both <a href="../availability/trait.UpdateAvailabilityData.html" title="trait hotshot_query_service::availability::UpdateAvailabilityData">UpdateAvailabilityData</a> and <a href="../status/trait.UpdateStatusData.html" title="trait hotshot_query_service::status::UpdateStatusData">UpdateStatusData</a>, then it can be fully
kept up to date through two interfaces:</p>
<ul>
<li><a href="../status/trait.UpdateStatusData.html#tymethod.populate_metrics" title="method hotshot_query_service::status::UpdateStatusData::populate_metrics">populate_metrics</a>, to get a handle for populating the
status metrics, which should be used when initializing a
<a href="hotshot::types::SystemContextHandle">SystemContextHandle</a></li>
<li><a href="trait.UpdateDataSource.html#tymethod.update">update</a>, to update the query state when a new HotShot event is emitted</li>
</ul>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.update" class="method"><a class="src rightside" href="../../src/hotshot_query_service/data_source/update.rs.html#57-60">source</a><h4 class="code-header">fn <a href="#tymethod.update" class="fn">update</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 mut self,
    event: &amp;'life1 Event&lt;Types&gt;
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.77.2/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.77.2/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.77.2/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.77.2/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.77.2/std/primitive.unit.html">()</a>, &lt;Self as <a class="trait" href="../availability/trait.UpdateAvailabilityData.html" title="trait hotshot_query_service::availability::UpdateAvailabilityData">UpdateAvailabilityData</a>&lt;Types&gt;&gt;::<a class="associatedtype" href="../availability/trait.UpdateAvailabilityData.html#associatedtype.Error" title="type hotshot_query_service::availability::UpdateAvailabilityData::Error">Error</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.77.2/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Update query state based on a new consensus event.</p>
<p>The caller is responsible for authenticating <code>event</code>. This function does not perform any
authentication, and if given an invalid <code>event</code> (one which does not follow from the latest
known state of the ledger) it may panic or silently accept the invalid <code>event</code>. This allows
the best possible performance in the case where the query service and the HotShot instance
are running in the same process (and thus the event stream, directly from HotShot) is
trusted.</p>
<p>If you want to update the data source with an untrusted event, for example one received from
a peer over the network, you must authenticate it first.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-UpdateDataSource%3CTypes%3E-for-T" class="impl"><a class="src rightside" href="../../src/hotshot_query_service/data_source/update.rs.html#64-133">source</a><a href="#impl-UpdateDataSource%3CTypes%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;Types: NodeType, T&gt; <a class="trait" href="trait.UpdateDataSource.html" title="trait hotshot_query_service::data_source::UpdateDataSource">UpdateDataSource</a>&lt;Types&gt; for T<div class="where">where
    T: <a class="trait" href="../availability/trait.UpdateAvailabilityData.html" title="trait hotshot_query_service::availability::UpdateAvailabilityData">UpdateAvailabilityData</a>&lt;Types&gt; + <a class="trait" href="../status/trait.UpdateStatusData.html" title="trait hotshot_query_service::status::UpdateStatusData">UpdateStatusData</a> + <a class="trait" href="https://doc.rust-lang.org/1.77.2/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,
    <a class="type" href="../type.Payload.html" title="type hotshot_query_service::Payload">Payload</a>&lt;Types&gt;: <a class="trait" href="../availability/trait.QueryablePayload.html" title="trait hotshot_query_service::availability::QueryablePayload">QueryablePayload</a>,</div></h3></section></div><script src="../../trait.impl/hotshot_query_service/data_source/update/trait.UpdateDataSource.js" async></script></section></div></main></body></html>