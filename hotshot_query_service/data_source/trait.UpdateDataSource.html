<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An extension trait for types which implement the update trait for each API module."><meta name="keywords" content="rust, rustlang, rust-lang, UpdateDataSource"><title>UpdateDataSource in hotshot_query_service::data_source - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../normalize.css"><link rel="stylesheet" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../ayu.css" disabled><link rel="stylesheet" href="../../dark.css" disabled><link rel="stylesheet" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../hotshot_query_service/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../hotshot_query_service/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">UpdateDataSource</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#required-associated-types">Required Associated Types</a></h3><ul><li><a href="#associatedtype.Error">Error</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><ul><li><a href="#tymethod.metrics">metrics</a></li><li><a href="#tymethod.update">update</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div></section><h2 class="location"><a href="index.html">In hotshot_query_service::data_source</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../hotshot_query_service/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Trait <a href="../index.html">hotshot_query_service</a>::<wbr><a href="index.html">data_source</a>::<wbr><a class="trait" href="#">UpdateDataSource</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/hotshot_query_service/update.rs.html#31-53">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust trait"><code>pub trait UpdateDataSource&lt;Types:&nbsp;NodeTypes&gt; {
    type <a href="#associatedtype.Error" class="associatedtype">Error</a>: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>;

    fn <a href="#tymethod.metrics" class="fnname">metrics</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn Metrics&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.update" class="fnname">update</a>(&amp;mut self, event: &amp;Event&lt;Types&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, Self::<a class="associatedtype" href="trait.UpdateDataSource.html#associatedtype.Error" title="type hotshot_query_service::data_source::UpdateDataSource::Error">Error</a>&gt;;
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An extension trait for types which implement the update trait for each API module.</p>
<p>If a type implements both <a href="../availability/trait.UpdateAvailabilityData.html" title="UpdateAvailabilityData">UpdateAvailabilityData</a> and <a href="../status/trait.UpdateStatusData.html" title="UpdateStatusData">UpdateStatusData</a>, then it can be fully
kept up to date through two interfaces:</p>
<ul>
<li><a href="trait.UpdateDataSource.html#tymethod.metrics">metrics</a>, to get a handle for populating the status metrics, which
should be used when initializing a <a href="hotshot::types::HotShotHandle">HotShotHandle</a></li>
<li><a href="trait.UpdateDataSource.html#tymethod.update">update</a>, to update the query state when a new HotShot event is
emitted</li>
</ul>
</div></details><h2 id="required-associated-types" class="small-section-header">Required Associated Types<a href="#required-associated-types" class="anchor"></a></h2><div class="methods"><div id="associatedtype.Error" class="method has-srclink"><a class="srclink rightside" href="../../src/hotshot_query_service/update.rs.html#32">source</a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a>: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/error/trait.Error.html" title="trait core::error::Error">Error</a> + <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a></h4></div></div><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.metrics" class="method has-srclink"><a class="srclink rightside" href="../../src/hotshot_query_service/update.rs.html#39">source</a><h4 class="code-header">fn <a href="#tymethod.metrics" class="fnname">metrics</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn Metrics&gt;</h4></div></summary><div class="docblock"><p>Get a handle for populating status metrics.</p>
<p>This function should be called before creating a
<a href="hotshot::types::HotShotHandle">HotShotHandle</a>, and the resulting [Metrics] handle should be
passed to HotShot, which will update it.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.update" class="method has-srclink"><a class="srclink rightside" href="../../src/hotshot_query_service/update.rs.html#52">source</a><h4 class="code-header">fn <a href="#tymethod.update" class="fnname">update</a>(&amp;mut self, event: &amp;Event&lt;Types&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, Self::<a class="associatedtype" href="trait.UpdateDataSource.html#associatedtype.Error" title="type hotshot_query_service::data_source::UpdateDataSource::Error">Error</a>&gt;</h4></div></summary><div class="docblock"><p>Update query state based on a new consensus event.</p>
<p>The caller is responsible for authenticating <code>event</code>. This function does not perform any
authentication, and if given an invalid <code>event</code> (one which does not follow from the latest
known state of the ledger) it may panic or silently accept the invalid <code>event</code>. This allows
the best possible performance in the case where the query service and the HotShot instance
are running in the same process (and thus the event stream, directly from HotShot) is
trusted.</p>
<p>If you want to update the data source with an untrusted event, for example one received from
a peer over the network, you must authenticate it first.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-UpdateDataSource%3CTypes%3E-for-T" class="impl has-srclink"><a class="srclink rightside" href="../../src/hotshot_query_service/update.rs.html#55-85">source</a><a href="#impl-UpdateDataSource%3CTypes%3E-for-T" class="anchor"></a><h3 class="code-header in-band">impl&lt;Types:&nbsp;NodeTypes, T:&nbsp;<a class="trait" href="../availability/trait.UpdateAvailabilityData.html" title="trait hotshot_query_service::availability::UpdateAvailabilityData">UpdateAvailabilityData</a>&lt;Types&gt; + <a class="trait" href="../status/trait.UpdateStatusData.html" title="trait hotshot_query_service::status::UpdateStatusData">UpdateStatusData</a> + <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>&gt; <a class="trait" href="trait.UpdateDataSource.html" title="trait hotshot_query_service::data_source::UpdateDataSource">UpdateDataSource</a>&lt;Types&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;Types::BlockType: <a class="trait" href="https://docs.rs/serde/1.0.148/serde/ser/trait.Serialize.html" title="trait serde::ser::Serialize">Serialize</a>,</span></h3></section></summary><div class="impl-items"><section id="associatedtype.Error-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error-1" class="anchor"></a><h4 class="code-header">type <a href="#associatedtype.Error" class="associatedtype">Error</a> = &lt;T as <a class="trait" href="../availability/trait.UpdateAvailabilityData.html" title="trait hotshot_query_service::availability::UpdateAvailabilityData">UpdateAvailabilityData</a>&lt;Types&gt;&gt;::<a class="associatedtype" href="../availability/trait.UpdateAvailabilityData.html#associatedtype.Error" title="type hotshot_query_service::availability::UpdateAvailabilityData::Error">Error</a></h4></section></div></details></div><script src="../../implementors/hotshot_query_service/update/trait.UpdateDataSource.js" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="hotshot_query_service" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0 (897e37553 2022-11-02)" ></div></body></html>